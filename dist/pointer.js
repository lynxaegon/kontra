!function(){let n,t=[],e=[],o={},r=[],a={},i={0:"left",1:"middle",2:"right"};function s(t){let e=n.x-Math.max(t.x,Math.min(n.x,t.x+t.width)),o=n.y-Math.max(t.y,Math.min(n.y,t.y+t.height));return e*e+o*o<n.radius*n.radius}function c(){let o,r,a=e.length?e:t;for(let t=a.length-1;t>=0;t--)if(r=(o=a[t]).collidesWithPointer?o.collidesWithPointer(n):s(o))return o}function u(n){a[i[n.button]]=!0,d(n,"onDown")}function f(n){a[i[n.button]]=!1,d(n,"onUp")}function d(t,e){if(t.preventDefault(),!kontra.canvas)return;let r,a;-1!==t.type.indexOf("mouse")?(r=t.clientX,a=t.clientY):(r=(t.touches[0]||t.changedTouches[0]).clientX,a=(t.touches[0]||t.changedTouches[0]).clientY),n.x=r-kontra.canvas.offsetLeft,n.y=a-kontra.canvas.offsetTop;let i=kontra.canvas;for(;i=i.offsetParent;)n.x-=i.offsetLeft,n.y-=i.offsetTop;let s,u=kontra.canvas.offsetHeight/kontra.canvas.height;n.x/=u,n.y/=u,t.target===kontra.canvas&&(s=c())&&s[e]&&s[e](),"onOver"==e&&(e="onMove"),o[e]&&o[e](t,s)}addEventListener("mousedown",u),addEventListener("touchstart",u,{passive:!1}),addEventListener("mouseup",f),addEventListener("touchend",f,{passive:!1}),addEventListener("blur",function(n){a={}}),addEventListener("mousemove",function(n){d(n,"onOver")}),addEventListener("touchmove",function(n){d(n,"onOver")},{passive:!1}),n=kontra.pointer={x:0,y:0,radius:5,track(n){[].concat(n).map(function(n){n&&!n._r&&(n._r=n.render,n.render=function(){t.push(this),this._r()},r.push(n))})},untrack(n,t){[].concat(n).map(function(n){n&&n._r&&(n.render=n._r,n._r=t);let e=r.indexOf(n);-1!==e&&r.splice(e,1)})},over:n=>-1!==r.indexOf(n)&&c()===n,onDown(n){o.onDown=n},onMove(n){o.onMove=n},onUp(n){o.onUp=n},pressed:n=>!!a[n],destroy(){r=[],o={}}},kontra._tick=function(){e.length=0,t.map(function(n){e.push(n)}),t.length=0}}();