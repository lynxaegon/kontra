!function(){let e,n=[],t=[],o={},i=[],r={},a=-1,s=!1,c={0:"left",1:"middle",2:"right"};function u(n){let t=e.x-Math.max(n.x,Math.min(e.x,n.x+n.width)),o=e.y-Math.max(n.y,Math.min(e.y,n.y+n.height));return t*t+o*o<e.radius*e.radius}function f(){let o,i,r=t.length?t:n;for(let n=r.length-1;n>=0;n--)if(i=(o=r[n]).collidesWithPointer?o.collidesWithPointer(e):u(o))return o}function d(e){r[c[e.button]]=!0,l(e,"onDown")}function h(e){r[c[e.button]]=!1,l(e,"onUp")}function l(n,t){if(n.preventDefault(),!kontra.canvas)return;if(-1!=a&&"onDown"==t)return;let i,r;if(-1!==n.type.indexOf("mouse"))i=n.clientX,r=n.clientY;else if(i=(n.touches[0]||n.changedTouches[0]).clientX,r=(n.touches[0]||n.changedTouches[0]).clientY,!s)if(-1==a&&n.touches[0])a=n.touches[0].identifier;else if("onUp"==t){if(n.changedTouches[0].identifier!=a)return;a=-1}e.x=i-kontra.canvas.offsetLeft,e.y=r-kontra.canvas.offsetTop;let c=kontra.canvas;for(;c=c.offsetParent;)e.x-=c.offsetLeft,e.y-=c.offsetTop;let u,d=kontra.canvas.offsetHeight/kontra.canvas.height;e.x/=d,e.y/=d,n.target===kontra.canvas&&(u=f())&&u[t]&&u[t](),"onOver"==t&&(t="onMove"),o[t]&&o[t](n,u)}addEventListener("mousedown",d),addEventListener("touchstart",d,{passive:!1}),addEventListener("mouseup",h),addEventListener("touchend",h,{passive:!1}),addEventListener("blur",function(e){r={}}),addEventListener("mousemove",function(e){l(e,"onOver")}),addEventListener("touchmove",function(e){l(e,"onOver")},{passive:!1}),e=kontra.pointer={x:0,y:0,radius:5,track(e){[].concat(e).map(function(e){e&&!e._r&&(e._r=e.render,e.render=function(){n.push(this),this._r()},i.push(e))})},untrack(e,n){[].concat(e).map(function(e){e&&e._r&&(e.render=e._r,e._r=n);let t=i.indexOf(e);-1!==t&&i.splice(t,1)})},over:e=>-1!==i.indexOf(e)&&f()===e,onDown(e){o.onDown=e},onMove(e){o.onMove=e},onUp(e){o.onUp=e},pressed:e=>!!r[e],destroy(){i=[],o={}},multitouch(e){s=e}},kontra._tick=function(){t.length=0,n.map(function(e){t.push(e)}),n.length=0}}();