!function(){let n,e=[],t=[],o={},i=[],r={},a={0:"left",1:"middle",2:"right"},s=[];function c(e){let t=n.x-Math.max(e.x,Math.min(n.x,e.x+e.width)),o=n.y-Math.max(e.y,Math.min(n.y,e.y+e.height));return t*t+o*o<n.radius*n.radius}function u(){let o,i,r=t.length?t:e;for(let e=r.length-1;e>=0;e--)if(i=(o=r[e]).collidesWithPointer?o.collidesWithPointer(n):c(o))return o}function h(n){r[a[n.button]]=!0,d(n,"onDown")}function f(n){r[a[n.button]]=!1,d(n,"onUp")}function d(e,t){if(e.preventDefault(),!kontra.canvas)return;let i,r,a,c,h;if(-1!==e.type.indexOf("mouse"))c=e.clientX,h=e.clientY,r=!1;else{for(i in r=!0,c=0,h=0,e.touches)e.touches.hasOwnProperty(i)&&(c+=e.touches[i].clientX,h+=e.touches[i].clientY);if(a=e.touches.length,"onUp"==t){for(i in e.changedTouches)e.changedTouches.hasOwnProperty(i)&&(c+=e.changedTouches[i].clientX,h+=e.changedTouches[i].clientY);a+=e.changedTouches.length}a>0&&(c=Math.floor(c/a),h=Math.floor(h/a))}n.x=c-kontra.canvas.offsetLeft,n.y=h-kontra.canvas.offsetTop;let f=kontra.canvas;for(;f=f.offsetParent;)n.x-=f.offsetLeft,n.y-=f.offsetTop;let d,l=kontra.canvas.offsetHeight/kontra.canvas.height;if(n.x/=l,n.y/=l,e.target===kontra.canvas&&((d=u())&&d[t]&&(r?"onDown"==t&&1==e.touches.length&&(s.push(d),d[t]()):d[t]()),"onUp"==t)){for(i in s)s[i]&&s[i][t]&&s[i][t]();s=[]}"onOver"==t&&(t="onMove"),o[t]&&o[t](e,d)}addEventListener("mousedown",h),addEventListener("mouseup",f),addEventListener("touchstart",h,{passive:!1}),addEventListener("touchend",f,{passive:!1}),addEventListener("blur",function(n){r={}}),addEventListener("mousemove",function(n){d(n,"onOver")}),addEventListener("touchmove",function(n){d(n,"onOver")},{passive:!1}),n=kontra.pointer={x:0,y:0,radius:5,track(n){[].concat(n).map(function(n){n&&!n._r&&(n._r=n.render,n.render=function(){e.push(this),this._r()},i.push(n))})},untrack(n,e){[].concat(n).map(function(n){n&&n._r&&(n.render=n._r,n._r=e);let t=i.indexOf(n);-1!==t&&i.splice(t,1)})},over:n=>-1!==i.indexOf(n)&&u()===n,onDown(n){o.onDown=n},onMove(n){o.onMove=n},onUp(n){o.onUp=n},pressed:n=>!!r[n],destroy(){i=[],o={}},multitouch(n){multiTouchEnabled=n}},kontra._tick=function(){t.length=0,e.map(function(n){t.push(n)}),e.length=0}}();